{% extends 'base.html' %}

{% block title %}Home{% endblock %}
{% block content_title %}<i class="bi bi-search"></i></i>&nbsp;EXPLORATION{% endblock %}

{% block under_content %}
<div class="mt-2">
    <h3 class="text-info">LOAD DATASET FROM CSV SOURCE</h3>
    <p>VIEW RAW DATASET</p>
    <div>{{ raw_df|safe }}</div>
    <hr>
</div>

<div class="mt-3">
    <h3 class="text-info">Number of lines : <span class="text-light">{{ raw_shape['nb_lines'] }} lines</span></h3>
    <h3 class="text-info">Number of columns : <span class="text-light">{{ raw_shape['nb_cols'] }} columns</span></h3>
    <h3 class="text-info">Number of cells (no null) : <span class="text-light">{{ raw_shape['nb_no_null_cells'] }} cells
            (no null)</span></h3>
    <h3 class="text-info">Number of cells (null) : <span class="text-light">{{ raw_shape['nb_null_cells'] }} cells
            (null)</span></h3>
    <hr>
</div>

<div>
    <h4 class="text-warning">COMMENTS :
        <span class="text-light">
            <ul>
                <li>Original dataset sample is very clean</li> 
                <li>No needs to delete or implement missing values</li>
                <li>Some features are in the form of categorical data represented with initials</li>
                <li>Cleaning will just consist in transforming categories in the form of initials into whole words with analyse of Dataset's documentation</li>
            </ul>
        </span>
    </h4>
        <hr>
</div>

<div>
    <h3 class="text-info">CLEAN DATASET</h3>
    <p>Change initial features string into full string features and load Dataset from db</p>
    <div>{{ modified_df|safe }}</div>
    <hr>
</div>

<div>
    <h3 class="text-info">Analyse clean columns </h3>
    <p>Show all columns with sample</p>
    <div>{{ df_sample|safe }}</div>
    <hr>
</div>

<div>
    <h4 class="text-warning">COMMENTS :
        <span class="text-light">
            <ul>
                <li>All Dataset was cleaned with full string</li>
                <li>Dataset contains just one categorical type : string object</li>
                <li>There are no numerical feature except index</li>
                <li>Each feature has 2 to 12 distinct categories</li>
                <li>It will be necessary to encode these categories when creating the model in the future</li>
            </ul>
        </span>
    </h4>
        <hr>
</div>

<div>
    <h3 class="text-info">Analyse de la Target : {{ target.target }} </h3>
    <p>View distribution of Target</p>
    <div class="text-center">
        <img class="graph" src="{{ target.source|safe }}" alt="graphique de repartition">
    </div>
    <hr>
</div>

<div>
    <h4 class="text-warning">COMMENTS :
        <span class="text-light">
            <ul>
                <li>Target '_class' is distributed in a balanced way in the dataset. We observe a distribution close to 50%. It will not be necessary to proceed to stratifications in the development of the model.</li>
            </ul>
        </span>
    </h4>
        <hr>
</div>

<h3 class="text-info">Analyse Features </h3>
<p>View distribution of features</p>

<div class="d-flex justify-content-center align-items-center flex-wrap bg-white">

    {% for feature in dist_features %}
    <div>
        <img class="graph" src="{{ feature.source|safe }}" alt="graphique de distribution de {{ feature.target }}">
    </div>
    {% endfor %}
    <hr>
</div>







{% endblock %}